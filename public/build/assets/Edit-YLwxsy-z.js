import{z as x,c as y,w,o as m,b as o,e as v,h as n,v as l,u as s,q as k,f,g as c,S as u}from"./app-bfppTam7.js";import{u as _,L as C}from"./backend-F-9oN4YH.js";import"./index-BeLMSIJM.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-CFKX_kLc.js";const B={class:"max-w-4xl mx-auto p-6 bg-white shadow-lg rounded-lg"},U={class:"grid grid-cols-2 gap-6"},T={class:"mb-4"},N={class:"mb-4"},V={class:"mb-4"},I={class:"mb-4"},E={class:"mb-4"},P={class:"mb-4"},S={class:"mb-4"},q={class:"mb-4"},h={class:"mb-4"},F={class:"mb-4"},L={key:0,class:"mt-2"},M=["src"],A={key:0,class:"mb-4"},R={__name:"Edit",props:{user:Object},setup(p){const a=p,d=a.user.profile||{first_name:"",last_name:"",middle_name:"",introduction:"",profile_image:""},r=_({name:a.user.name,email:a.user.email,password:"",password_confirmation:"",role:a.user.Roles,profile:{first_name:d.FirstName,last_name:d.LastName,middle_name:d.MiddleName,introduction:d.Introduction,profile_image:d.ProfileImage?route("storage",d.ProfileImage):null},chef:{income:a.user.chef?a.user.chef.Income:0}}),g=i=>{const e=i.target.files[0];if(e){const t=new FileReader;t.onload=()=>{r.profile.profile_image=t.result},t.readAsDataURL(e)}},b=async()=>{try{(await u.fire({title:"Are you sure?",text:"Do you want to update this user's information?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, update it!",cancelButtonText:"No, cancel!",background:"rgba(255, 255, 255, 1)",confirmButtonColor:"rgba(204, 162, 35, 1)",cancelButtonColor:"rgba(54, 69, 79, 1)",iconColor:"rgba(255, 219, 99, 1)"})).isConfirmed?r.put(route("users.update",a.user.id),{preserveScroll:!0,onSuccess:()=>{u.fire({title:"Success!",text:"User updated successfully.",icon:"success",confirmButtonText:"Okay"})},onError:e=>{console.error(e),u.fire({title:"Error!",text:"There was an error updating the user.",icon:"error",confirmButtonText:"Try Again"})}}):u.fire({title:"Cancelled",text:"No changes were made.",icon:"info",confirmButtonText:"Okay"})}catch(i){console.error("Error submitting form:",i),u.fire({title:"Error!",text:"There was an issue with your submission. Please try again.",icon:"error",confirmButtonText:"Okay"})}};return x(()=>r.role,async(i,e)=>{e==="chef"&&(i==="admin"||i==="user")&&((await u.fire({title:`Changing role from Chef to ${i}`,text:"This will delete all chef-related data for this user. Do you want to proceed?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, proceed!",cancelButtonText:"No, go back!",background:"rgba(255, 255, 255, 1)",confirmButtonColor:"rgba(204, 162, 35, 1)",cancelButtonColor:"rgba(54, 69, 79, 1)",iconColor:"rgba(255, 219, 99, 1)"})).isConfirmed||(r.role=e))}),(i,e)=>(m(),y(C,null,{default:w(()=>[o("div",B,[e[23]||(e[23]=o("h1",{class:"text-3xl font-semibold text-center mb-6"},"Edit User",-1)),o("form",{onSubmit:v(b,["prevent"]),enctype:"multipart/form-data"},[o("div",U,[o("div",T,[e[10]||(e[10]=o("label",{for:"name",class:"block text-sm font-medium text-gray-700"},"Name",-1)),n(o("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>s(r).name=t),id:"name",type:"text",class:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:outline-none",required:""},null,512),[[l,s(r).name]])]),o("div",N,[e[11]||(e[11]=o("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),n(o("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>s(r).email=t),id:"email",type:"email",class:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:outline-none",required:""},null,512),[[l,s(r).email]])]),o("div",V,[e[12]||(e[12]=o("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"Password",-1)),n(o("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>s(r).password=t),id:"password",type:"password",class:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:outline-none"},null,512),[[l,s(r).password]])]),o("div",I,[e[13]||(e[13]=o("label",{for:"password_confirmation",class:"block text-sm font-medium text-gray-700"},"Confirm Password",-1)),n(o("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>s(r).password_confirmation=t),id:"password_confirmation",type:"password",class:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:outline-none"},null,512),[[l,s(r).password_confirmation]])]),o("div",E,[e[15]||(e[15]=o("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Role",-1)),n(o("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>s(r).role=t),id:"role",class:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:outline-none",required:""},e[14]||(e[14]=[o("option",{value:"admin"},"Admin",-1),o("option",{value:"chef"},"Chef",-1),o("option",{value:"user"},"User",-1)]),512),[[k,s(r).role]])]),o("div",P,[e[16]||(e[16]=o("label",{for:"first_name",class:"block text-sm font-medium text-gray-700"},"First Name",-1)),n(o("input",{"onUpdate:modelValue":e[5]||(e[5]=t=>s(r).profile.first_name=t),id:"first_name",type:"text",class:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:outline-none",required:""},null,512),[[l,s(r).profile.first_name]])]),o("div",S,[e[17]||(e[17]=o("label",{for:"last_name",class:"block text-sm font-medium text-gray-700"},"Last Name",-1)),n(o("input",{"onUpdate:modelValue":e[6]||(e[6]=t=>s(r).profile.last_name=t),id:"last_name",type:"text",class:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:outline-none",required:""},null,512),[[l,s(r).profile.last_name]])]),o("div",q,[e[18]||(e[18]=o("label",{for:"middle_name",class:"block text-sm font-medium text-gray-700"},"Middle Name",-1)),n(o("input",{"onUpdate:modelValue":e[7]||(e[7]=t=>s(r).profile.middle_name=t),id:"middle_name",type:"text",class:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:outline-none"},null,512),[[l,s(r).profile.middle_name]])]),o("div",h,[e[19]||(e[19]=o("label",{for:"introduction",class:"block text-sm font-medium text-gray-700"},"Introduction",-1)),n(o("textarea",{"onUpdate:modelValue":e[8]||(e[8]=t=>s(r).profile.introduction=t),id:"introduction",class:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:outline-none"},null,512),[[l,s(r).profile.introduction]])]),o("div",F,[e[20]||(e[20]=o("label",{for:"profile_image",class:"block text-sm font-medium text-gray-700"},"Profile Image",-1)),o("input",{ref:"profile_image",onChange:g,id:"profile_image",type:"file",class:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:outline-none"},null,544),s(r).profile.profile_image?(m(),f("div",L,[o("img",{src:s(r).profile.profile_image,alt:"Profile Image",class:"w-20 h-20 rounded-full object-cover"},null,8,M)])):c("",!0)]),s(r).role==="chef"?(m(),f("div",A,[e[21]||(e[21]=o("label",{for:"income",class:"block text-sm font-medium text-gray-700"},"Income",-1)),n(o("input",{"onUpdate:modelValue":e[9]||(e[9]=t=>s(r).chef.income=t),id:"income",type:"number",class:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:outline-none"},null,512),[[l,s(r).chef.income]])])):c("",!0),e[22]||(e[22]=o("div",{class:"col-span-2 flex justify-center space-x-6 mt-6"},[o("button",{type:"submit",class:"px-6 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 focus:ring-2 focus:ring-orange-500"},"Update User")],-1))])],32)])]),_:1}))}};export{R as default};
