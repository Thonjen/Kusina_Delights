import{r as u,x as w,c as P,w as k,l as x,S as d,o,b as e,f as r,g,t as c,d as N,n as C,p as D,F as E,h as _,y as B,v as F}from"./app-B9TWRML0.js";import{L as j}from"./frontend-CQ0GuMzs.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";const S={class:"relative overflow-hidden"},V={class:"flex items-center justify-center h-full relative px-8 sm:px-12 lg:px-16 mt-10 mb-10"},M={class:"bg-white w-full max-w-[1400px] p-10 sm:p-16 lg:p-20 rounded-2xl shadow-lg flex gap-10 flex-wrap lg:flex-nowrap"},A={class:"bg-yellow-300 flex-1 h-[600px] p-10 rounded-[2rem] shadow-md relative"},L={class:"flex flex-col items-center"},U={class:"relative w-48 h-48 rounded-full shadow-md bg-gray-200 overflow-hidden"},T={for:"profile_picture",class:"cursor-pointer w-full h-full block"},J=["src"],O={key:1,class:"fas fa-user text-8xl text-gray-500 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"},$={class:"text-center mt-6 font-semibold text-2xl"},z={class:"w-full text-left mt-4 pl-4"},G={class:"text-sm font-medium"},R={class:"text-sm font-medium"},q={class:"bg-yellow-300 flex-[2] p-8 sm:p-12 rounded-2xl shadow-lg relative"},H={class:"absolute top-4 right-4 text-gray-600 cursor-pointer"},K={class:"grid grid-cols-1 sm:grid-cols-2 gap-8"},Q=["for"],W={class:"relative"},X={key:0,class:"w-full p-4 rounded-lg text-gray-800 bg-gray-100 border border-gray-300 hover:bg-gray-200 transition-all duration-200 ease-in-out"},Y={class:"text-sm text-gray-600"},Z=["id","type","onUpdate:modelValue","placeholder"],ee={key:2,class:"relative mt-4"},te={__name:"Profile_edit",setup(ae){const p=u(null),l=u(!1),i=u([]),m=u(""),f=u({}),v=async()=>{try{const s=await x.get("/api/profile"),{user:t,profile:a}=s.data;f.value={name:t.name,email:t.email,date_joined:t.created_at},i.value=[{id:"first_name",label:"First Name",type:"text",value:a.first_name,placeholder:"John"},{id:"last_name",label:"Last Name",type:"text",value:a.last_name,placeholder:"Doe"},{id:"name",label:"Username",type:"text",value:t.name,placeholder:"johndoe123"},{id:"email",label:"Email",type:"email",value:t.email,placeholder:"john.doe@example.com"},{id:"password",label:"Password",type:"password",value:"",placeholder:"**************"}],p.value=t.ProfileImage?`/storage/${t.ProfileImage}`:null}catch{d.fire({icon:"error",title:"Oops...",text:"Error fetching profile data!"})}},y=async()=>{try{const s=i.value.reduce((t,a)=>(t[a.id]=a.value,t),{});s.password_confirmation=m.value,await x.post("/profile/update",s),d.fire({icon:"success",title:"Success!",text:"Profile updated successfully."}),l.value=!1,v()}catch{d.fire({icon:"error",title:"Error",text:"Failed to update profile."})}},h=()=>{l.value?y():l.value=!0},b=async s=>{const t=s.target.files[0];if(t){const a=new FormData;a.append("ProfileImage",t),a.append("first_name",i.value[0].value),a.append("last_name",i.value[1].value),a.append("name",i.value[2].value),a.append("email",i.value[3].value);try{const n=await x.post("/profile/update",a,{headers:{"Content-Type":"multipart/form-data"}});p.value=`/storage/${n.data.ProfileImage}`,d.fire({icon:"success",title:"Success!",text:"Profile picture updated successfully."}),l.value=!1,v()}catch{d.fire({icon:"error",title:"Error",text:"Failed to update profile picture."})}}else d.fire({icon:"warning",title:"No file selected",text:"Please select an image to upload."})};return w(v),(s,t)=>(o(),P(j,null,{default:k(()=>[e("div",S,[t[6]||(t[6]=e("div",{class:"absolute inset-0 -m-[20px]"},[e("div",{class:"absolute inset-0 bg-cover bg-center",style:{"background-image":"url('https://c.animaapp.com/9OBfntRB/img/sheelah-brennan-uaevmc51ttw-unsplash-1.png')",filter:"brightness(0.3) blur(20px)"}})],-1)),e("div",V,[e("div",M,[e("div",A,[t[3]||(t[3]=e("div",{class:"absolute top-4 right-4 text-gray-600 cursor-pointer"},[e("a",{href:"/profile"},[e("i",{class:"fas fa-pen text-2xl"})])],-1)),e("div",L,[e("div",U,[e("label",T,[p.value?(o(),r("img",{key:0,src:p.value,alt:"Profile Picture",class:"w-full h-full object-cover"},null,8,J)):(o(),r("i",O))]),l.value?(o(),r("input",{key:0,type:"file",id:"profile_picture",class:"hidden",accept:"image/*",onChange:b},null,32)):g("",!0)]),t[1]||(t[1]=e("div",{class:"mt-6 w-full border-t-4 border-black-100"},null,-1)),e("p",$,c(f.value.name||"N/A"),1),e("div",z,[e("p",G,"Email: "+c(f.value.email||"N/A"),1),e("p",R,"Date Joined: "+c(f.value.date_joined||"N/A"),1)]),t[2]||(t[2]=e("a",{href:"/profile",class:"text-blue-500"},"Go Back",-1))])]),e("div",q,[e("div",H,[e("button",{class:"",onClick:h},[N(c(l.value?"Save":"Edit")+" ",1),e("i",{class:C([l.value?"fa-solid fa-floppy-disk":"fas fa-pen","text-2xl mr-2 transition-all duration-300 text-normal"])},null,2)])]),t[5]||(t[5]=e("h2",{class:"font-semibold text-2xl mb-8 text-center text-gray-800"},"Account",-1)),e("div",K,[(o(!0),r(E,null,D(i.value,a=>(o(),r("div",{key:a.id,class:"space-y-4"},[e("label",{for:a.id,class:"block text-sm font-bold text-gray-700"},c(a.label),9,Q),e("div",W,[l.value?_((o(),r("input",{key:1,id:a.id,type:a.type,"onUpdate:modelValue":n=>a.value=n,placeholder:a.placeholder,class:"w-full border border-gray-300 p-3 rounded-md text-gray-800 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 transition duration-150 ease-in-out"},null,8,Z)),[[B,a.value]]):(o(),r("div",X,[e("p",Y,c(a.value||a.placeholder),1)])),l.value&&a.id==="password"?(o(),r("div",ee,[t[4]||(t[4]=e("label",{for:"confirm_password",class:"block text-sm font-medium text-gray-700"},"Confirm Password",-1)),_(e("input",{"onUpdate:modelValue":t[0]||(t[0]=n=>m.value=n),id:"confirm_password",type:"password",placeholder:"Confirm Password",class:"w-full border border-gray-300 p-3 rounded-md text-gray-800 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:border-yellow-500 transition duration-150 ease-in-out"},null,512),[[F,m.value]])])):g("",!0)])]))),128))])])])])])]),_:1}))}},re=I(te,[["__scopeId","data-v-2c6c05c2"]]);export{re as default};
