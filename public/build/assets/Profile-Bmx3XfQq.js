import{Q as D,s as k,r as c,c as R,w as V,o as s,b as e,t as r,d as u,f as a,g as p,h as E,v as L,p as C,F as v,e as T,S as i,n as U}from"./app-bfppTam7.js";import{L as N}from"./frontend-CLQAzc1F.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const O={class:"relative overflow-hidden"},z={class:"flex items-center justify-center h-full relative px-12 sm:px-16 lg:px-20 mt-10 mb-10"},H={class:"bg-white w-full max-w-[1600px] p-12 sm:p-16 lg:p-20 rounded-2xl shadow-lg flex gap-12"},Y={class:"bg-yellow-300 w-full h-[80vh] sm:w-1/3 p-12 rounded-[2rem] shadow-[5px_5px_15px_rgba(0,0,0,0.5)] relative"},q={class:"flex flex-col items-center"},J=["src"],Q={class:"text-center mt-8 font-semibold text-2xl"},W={class:"w-full mt-6 pl-6 text-left space-y-2"},G={class:"text-small text-black"},K={class:"text-small text-black"},X={class:"absolute bottom-6 left-1/2 transform -translate-x-1/2 flex flex-col space-y-4"},Z={key:0,href:"/dashboard",class:"w-[20vh] bg-green-300 text-black py-2 px-10 rounded-2xl font-semibold shadow-[5px_5px_15px_rgba(0,0,0,0.3)] text-small flex items-center justify-center text-center"},ee={key:1,href:"/chef/dashboard",class:"w-[20vh] bg-green-300 text-black py-2 px-10 rounded-2xl font-semibold shadow-[5px_5px_15px_rgba(0,0,0,0.3)] text-small flex items-center justify-center text-center"},te={class:"flex flex-col w-full sm:w-2/3 gap-12"},le={class:"bg-yellow-300 p-10 rounded-lg shadow-md relative rounded-[2.3rem] shadow-[5px_5px_15px_rgba(0,0,0,0.5)]"},se={key:0},oe={key:1},ae={class:"text-small italic text-black-100"},ne={class:"bg-yellow-300 p-10 rounded-lg shadow-md rounded-[2.3rem] shadow-[5px_5px_15px_rgba(0,0,0,0.5)]"},ie={class:"space-y-8"},re={key:0,class:"text-sm text-black-100"},de=["src"],ce={class:"w-full"},ue={class:"flex justify-between mb-4"},pe={class:"w-2/4"},xe={class:"font-semibold text-lg text-black-100 mb-2"},fe={class:"text-black-100 italic text-small mb-4"},me={class:"flex flex-col items-end w-2/4 gap-4"},ge=["href"],be={class:"flex items-center gap-1 text-yellow-400"},he={key:0,class:"fa fa-star w-5 h-5 text-yellow-500",style:{"text-shadow":"1px 1px 2px rgba(0, 0, 0, 0.3)"},"aria-hidden":"true"},ve={key:1,class:"fa fa-star w-5 h-5 text-black-100",style:{"text-shadow":"1px 1px 2px rgba(0, 0, 0, 0.3)"},"aria-hidden":"true"},we={key:0,class:"flex justify-center mt-8 space-x-4"},ye=["onClick","innerHTML"],_e={key:0,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50"},ke={class:"bg-gradient-to-r from-yellow-200 to-yellow-300 w-full max-w-lg p-10 rounded-2xl shadow-3xl relative"},Ce={class:"mb-8"},je={class:"mb-8"},Ee={class:"flex justify-between gap-6"},Le={key:1,class:"flex items-center justify-center"},Se="/storage/logo3.png",Fe={__name:"Profile",setup(Be){const{props:m}=D(),n=k({...m.user,role:m.user.role}),w=k(m.profile),d=k(m.reviews),g=c(!1),b=c(w.introduction);function S(){g.value=!g.value}function B(o){o?axios.get(o).then(t=>{t.data&&t.data.data?(d.data=t.data.data,d.links=t.data.links):(console.error("Unexpected response structure:",t),i.fire({icon:"error",title:"Error",text:"Failed to fetch data. Please try again later."}))}).catch(t=>{console.error(t),i.fire({icon:"error",title:"Error",text:"Failed to load the next page."})}):console.warn("Invalid URL passed to changePage method.")}function M(){if(!b.value.trim()){i.fire({icon:"warning",title:"Validation Error",text:"Introduction cannot be empty."});return}g.value=!1,P(b.value)}function P(o){i.fire({title:"Saving...",allowOutsideClick:!1,didOpen:()=>{i.showLoading()}}),axios.post("/update-introduction",{introduction:o}).then(t=>{w.introduction=o,i.fire({icon:"success",title:"Saved!",text:"Your introduction has been updated."})}).catch(t=>{console.error(t),i.fire({icon:"error",title:"Error",text:"Failed to update your introduction. Please try again."})})}function I(){i.fire({title:"Are you sure?",text:"You will be logged out.",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, logout"}).then(o=>{o.isConfirmed&&this.$inertia.post("/logout")})}const x=c(!1),f=c(""),h=c([]),y=c(!1),F=o=>{h.value=Array.from(o.target.files)},$=async()=>{if(!f.value.trim()||h.value.length===0){i.fire({icon:"warning",title:"Validation Error",text:"Message and at least one file are required."});return}const o=new FormData;o.append("message",f.value),o.append("user_id",n.id),o.append("user_name",n.name),o.append("user_email",n.email),h.value.forEach((t,l)=>{o.append(`files[${l}]`,t)});try{y.value=!0,i.fire({title:"Submitting...",allowOutsideClick:!1,didOpen:()=>{i.showLoading()}});const t=await axios.post("/apply-chef",o,{headers:{"Content-Type":"multipart/form-data"}});i.fire({icon:"success",title:"Application Sent",text:t.data.message}),A()}catch(t){console.error(t),i.fire({icon:"error",title:"Error",text:"Failed to send application. Please try again."})}finally{y.value=!1}},A=()=>{x.value=!1,f.value="",h.value=[]};return(o,t)=>(s(),R(N,null,{default:V(()=>[e("div",O,[t[23]||(t[23]=e("div",{class:"absolute inset-0 -m-[20px]"},[e("div",{class:"absolute inset-0 bg-cover bg-center",style:{"background-image":"url('https://c.animaapp.com/9OBfntRB/img/sheelah-brennan-uaevmc51ttw-unsplash-1.png')",filter:"brightness(0.3) blur(20px)"}})],-1)),e("div",z,[e("div",H,[e("div",Y,[t[8]||(t[8]=e("div",{class:"absolute top-6 right-6 text-black-100 cursor-pointer"},[e("a",{href:"/profile/edit"},[e("i",{class:"fas fa-pen text-4xl"})])],-1)),e("div",q,[e("img",{src:n.ProfileImage?`/storage/${n.ProfileImage}`:"https://via.placeholder.com/403x212",alt:"Profile Image",class:"w-48 h-48 rounded-full object-cover shadow-md"},null,8,J),e("p",Q,r(n.name),1),t[7]||(t[7]=e("div",{class:"mt-10 border-t-4 border-black-100 w-full"},null,-1)),e("div",W,[e("p",G,[t[5]||(t[5]=e("span",{class:"font-medium font-semibold text-black"},"Email:",-1)),u(" "+r(n.email),1)]),e("p",K,[t[6]||(t[6]=e("span",{class:"font-medium font-semibold text-black"},"Date Joined:",-1)),u(" "+r(n.date_joined),1)])])]),e("div",X,[n.role==="admin"?(s(),a("a",Z," Admin Dashboard ")):p("",!0),n.role==="chef"?(s(),a("a",ee," Chef Dashboard ")):p("",!0),n.role==="user"?(s(),a("button",{key:2,onClick:t[0]||(t[0]=l=>x.value=!0),class:"w-[20vh] bg-green-300 text-black py-2 px-10 rounded-2xl font-semibold shadow-[5px_5px_15px_rgba(0,0,0,0.3)] text-small flex items-center justify-center text-center"}," Apply to be a Chef ")):p("",!0),e("button",{onClick:I,class:"w-[20vh] bg-green-300 text-black py-2 px-10 rounded-2xl font-semibold shadow-[5px_5px_15px_rgba(0,0,0,0.3)] text-small flex items-center justify-center text-center"}," Logout ")])]),e("div",te,[e("div",le,[e("div",{class:"absolute top-6 right-6 text-black-100 cursor-pointer",onClick:S},t[9]||(t[9]=[e("i",{class:"fas fa-pen text-3xl"},null,-1)])),t[11]||(t[11]=e("h2",{class:"font-semibold text-2xl mb-4"},"Bio:",-1)),g.value?(s(),a("div",se,[E(e("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>b.value=l),type:"text",class:"border p-2 rounded-md w-full",placeholder:"Enter your introduction"},null,512),[[L,b.value]]),e("button",{onClick:M,class:"bg-green-300 text-black p-2 rounded-md mt-2"},"Save")])):(s(),a("div",oe,[e("p",ae,[t[10]||(t[10]=e("span",{class:"font-semibold"},null,-1)),u(" "+r(w.introduction),1)])]))]),e("div",ne,[t[13]||(t[13]=e("h2",{class:"font-semibold text-3xl text-black-100 mb-8 border-b-2 border-black-100 pb-4"},"Review History:",-1)),e("ul",ie,[d.length===0?(s(),a("li",re," No reviews yet. ")):(s(!0),a(v,{key:1},C(d,(l,_)=>(s(),a("li",{key:_,class:"flex items-start gap-6 transition-transform transform hover:scale-105"},[e("img",{src:l.RecipePhoto?`/storage/${l.RecipePhoto}`:"https://via.placeholder.com/403x212",alt:"Recipe Image",class:"w-24 h-24 rounded-md object-cover shadow-md border-2 border-yellow-500"},null,8,de),e("div",ce,[e("div",ue,[e("div",pe,[e("div",xe,"Recipe Title: "+r(l.title),1),e("p",fe,"Comment: "+r(l.comment),1)]),e("div",me,[e("a",{href:`/api/recipes/${l.recipe_id}`,class:"px-6 py-2 bg-yellow-400 text-black-100 rounded-full shadow-lg hover:bg-yellow-500 transition-all duration-300 ease-in-out"}," View Recipe ",8,ge),e("div",be,[t[12]||(t[12]=e("p",{class:"text-black-100 text-sm"},"Star rating:",-1)),(s(),a(v,null,C(5,j=>(s(),a(v,null,[j<=l.stars?(s(),a("i",he)):(s(),a("i",ve))],64))),64))])])])])]))),128))]),d.links&&d.links.length>0?(s(),a("div",we,[(s(!0),a(v,null,C(d.links,(l,_)=>(s(),a("button",{key:_,class:U(["px-4 py-2 rounded-md",l.active?"bg-yellow-400 text-black":"bg-white text-black"]),onClick:j=>B(l.url),innerHTML:l.label},null,10,ye))),128))])):p("",!0)])])]),x.value?(s(),a("div",_e,[e("div",ke,[e("button",{onClick:t[2]||(t[2]=l=>x.value=!1),class:"absolute top-4 right-4 text-gray-500 hover:text-gray-700 transition-all","aria-label":"Close Modal"},t[14]||(t[14]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)])),e("div",{class:"flex justify-center mb-8"},[e("img",{src:Se,alt:"Logo",class:"h-36 w-36 object-contain shadow-lg rounded-full"})]),t[21]||(t[21]=e("h2",{class:"text-3xl font-extrabold text-gray-800 mb-8 text-center"}," Apply to Be a Chef ",-1)),e("p",null,[t[15]||(t[15]=e("strong",null,"User ID:",-1)),u(" "+r(n.id),1)]),e("p",null,[t[16]||(t[16]=e("strong",null,"Name:",-1)),u(" "+r(n.name),1)]),e("p",null,[t[17]||(t[17]=e("strong",null,"Email:",-1)),u(" "+r(n.email),1)]),e("form",{onSubmit:T($,["prevent"])},[e("div",Ce,[t[18]||(t[18]=e("label",{for:"message",class:"block text-sm font-semibold text-gray-700 mb-3"}," Message: ",-1)),E(e("textarea",{id:"message","onUpdate:modelValue":t[3]||(t[3]=l=>f.value=l),class:"w-full border-2 border-yellow-500 rounded-lg p-4 text-gray-800 focus:ring-4 focus:ring-yellow-500 focus:outline-none resize-none transition-all",placeholder:"Write your application message here...",rows:"6",required:""},null,512),[[L,f.value]])]),e("div",je,[t[19]||(t[19]=e("label",{for:"files",class:"block text-sm font-semibold text-gray-700 mb-3"}," Upload Files: ",-1)),e("input",{id:"files",type:"file",onChange:F,multiple:"",class:"w-full border-2 border-yellow-500 rounded-lg p-4 text-gray-800 focus:ring-4 focus:ring-yellow-500 focus:outline-none transition-all"},null,32)]),e("div",Ee,[e("button",{type:"button",onClick:t[4]||(t[4]=l=>x.value=!1),class:"w-full py-4 px-6 bg-gray-200 text-gray-800 rounded-lg text-sm font-semibold hover:bg-gray-300 transition-all"}," Cancel "),t[20]||(t[20]=e("button",{type:"submit",class:"w-full py-4 px-6 bg-yellow-500 text-white rounded-lg text-sm font-semibold hover:bg-yellow-600 shadow-2xl transition-all"}," Submit Application ",-1))])],32)])])):p("",!0),y.value?(s(),a("div",Le,t[22]||(t[22]=[e("div",{class:"spinner"},"Loading...",-1)]))):p("",!0)])])]),_:1}))}};export{Fe as default};
