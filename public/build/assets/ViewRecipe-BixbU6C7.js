import{L as f}from"./frontend-B9bxqHpN.js";import{m as h,c as y,w as b,o as l,b as e,aS as _,t as r,f as i,p as c,F as u,h as p,v as m,d as k,n as v}from"./app-BUfevaoo.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";const L={components:{Layout:f},props:{recipe:Object,viewCount:Number},data(){return{rating:0,reviewText:"",username:""}},mounted(){console.log("Received view count:",this.viewCount)},methods:{setRating(a){this.rating=a},async submitReview(){try{const a=await axios.post(`/api/recipes/${this.recipe.RecipeID}/reviews`,{rating:this.rating,review:this.reviewText});this.recipe.reviews.push(a.data),this.reviewText="",this.rating=0}catch(a){console.error("Error submitting review:",a)}}}},C={class:"relative h-[362px]"},T={class:"flex items-center justify-center h-full relative"},z={class:"text-white text-center px-4 text-large font-bold drop-shadow-xl white-shadow"},B={class:"absolute bottom-4 right-4 text-white text-lg bg-black opacity-70 px-4 py-2 rounded-full"},I={class:"mx-auto text-left max-w-4xl my-4 text-small text-black-100 space-y-4"},S={class:"text-small font-bold"},M={class:"p-6 bg-gray-100 rounded-lg max-w-6xl mx-auto space-y-4 mt-8"},V={key:0,class:"bg-white p-4 text-center text-gray-600 font-semibold"},j={key:1,class:"bg-gray-200 rounded-lg p-4 space-y-4"},D={class:"flex items-center text-gray-700 font-bold"},N={class:"text-gray-600 mt-1"},U={class:"flex items-center"},A=["d"],E={class:"bg-gray-200 rounded-lg p-4 space-y-3"},F={class:"flex items-center space-x-4"},P={class:"flex items-center space-x-2"},H={class:"flex items-center space-x-1 text-2xl"},O=["onClick"],W=["d"],q={class:"flex justify-start space-x-2 mt-4"};function G(a,t,o,J,n,g){const w=h("Layout");return l(),y(w,null,{default:b(()=>[e("div",C,[e("div",{class:"absolute inset-0 bg-cover bg-center",style:_({backgroundImage:"url('/storage/"+o.recipe.RecipePhoto+"')",filter:"brightness(0.7)"})},null,4),e("div",T,[e("p",z,r(o.recipe.RecipeTitle),1),e("div",B," Views: "+r(o.viewCount),1)])]),e("div",I,[e("div",null,[t[3]||(t[3]=e("p",{class:"text-small font-bold"},"Ingredients",-1)),(l(!0),i(u,null,c(o.recipe.Ingredients.split(","),(s,d)=>(l(),i("div",{key:d},[e("p",null,r(s.trim()),1)]))),128))]),e("div",null,[t[4]||(t[4]=e("p",{class:"text-normal font-bold"},"How To Prepare",-1)),(l(!0),i(u,null,c(o.recipe.Instructions.split(`
`),(s,d)=>(l(),i("div",{key:d},[e("p",null,[e("span",S,r(s.trim()),1)])]))),128))]),e("div",null,[t[5]||(t[5]=e("p",{class:"font-bold"},"Additional Information",-1)),e("p",null,r(o.recipe.Description),1)])]),e("div",M,[t[9]||(t[9]=e("h2",{class:"text-2xl font-bold"},"Reviews",-1)),o.recipe.reviews.length===0?(l(),i("div",V," No reviews yet. ")):(l(),i("div",j,[(l(!0),i(u,null,c(o.recipe.reviews,(s,d)=>(l(),i("div",{key:d,class:"bg-white rounded-lg p-4 flex justify-between items-start shadow-sm"},[e("div",null,[e("p",D,[t[6]||(t[6]=e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",class:"text-gray-500"},[e("circle",{cx:"12",cy:"8",r:"4",class:"fill-current text-gray-600"}),e("path",{d:"M12 14c-4 0-6 2-6 3v1h12v-1c0-1-2-3-6-3z",class:"fill-current text-gray-600"})],-1)),k(" "+r(s.user.name||"Anonymous"),1)]),e("p",N,[e("i",null,r(s.Review),1)])]),e("div",U,[(l(),i(u,null,c(5,x=>e("svg",{key:x,class:v({"fill-yellow-500":s.Star>=x,"fill-gray-300":s.Star<x,"cursor-pointer":!0,"hover:fill-yellow-400":!0,"transition-colors":!0}),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"},[e("path",{d:s.Star>=x?"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z":"M12 15.4l3.76 2.28-1-4.17 3.27-2.84-4.28-.38L12 4.75l-1.75 5.68-4.28.38 3.27 2.84-1 4.17z"},null,8,A)],2)),64))])]))),128))])),t[10]||(t[10]=e("h3",{class:"text-xl font-bold mt-6"},"Write a Review",-1)),e("div",E,[p(e("textarea",{"onUpdate:modelValue":t[0]||(t[0]=s=>n.reviewText=s),placeholder:"Review*",class:"w-full p-3 bg-gray-100 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-300 resize-none text-small"},null,512),[[m,n.reviewText]]),e("div",F,[p(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=s=>n.username=s),placeholder:"Username*",class:"w-1/2 p-3 bg-gray-100 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-300 text-small"},null,512),[[m,n.username]]),e("div",P,[t[7]||(t[7]=e("label",{class:"text-gray-700 font-semibold"},"Rate",-1)),e("div",H,[(l(),i(u,null,c(5,s=>e("svg",{key:s,onClick:d=>g.setRating(s),class:v({"fill-yellow-500":n.rating>=s,"fill-gray-300":n.rating<s,"cursor-pointer":!0,"hover:fill-yellow-400":!0,"transition-colors":!0}),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24"},[e("path",{d:n.rating>=s?"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z":"M12 15.4l3.76 2.28-1-4.17 3.27-2.84-4.28-.38L12 4.75l-1.75 5.68-4.28.38 3.27 2.84-1 4.17z"},null,8,W)],10,O)),64))])])]),e("div",q,[e("button",{onClick:t[2]||(t[2]=(...s)=>g.submitReview&&g.submitReview(...s)),class:"bg-green-400 text-white font-semibold py-2 px-36 rounded-2xl hover:bg-green-500 text-small"},"Submit Review"),t[8]||(t[8]=e("button",{class:"bg-red-400 text-white font-semibold py-2 px-28 rounded-2xl hover:bg-red-500 text-small"},"Cancel",-1))])])])]),_:1})}const Y=R(L,[["render",G],["__scopeId","data-v-0b6c262c"]]);export{Y as default};
