import{q as b,c as y,w as x,o as m,b as o,e as w,h as i,v as l,u as s,D as _,f as u,g as f}from"./app-BUfevaoo.js";import{u as v,L as k}from"./backend-JHIvSUl3.js";import"./ApplicationLogo-79heVFSS.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-yShTJVBL.js";const U={class:"max-w-4xl mx-auto p-6 bg-white shadow-lg rounded-lg"},V={class:"grid grid-cols-2 gap-6"},I={class:"mb-4"},N={class:"mb-4"},C={class:"mb-4"},E={class:"mb-4"},F={class:"mb-4"},q={class:"mb-4"},D={class:"mb-4"},P={class:"mb-4"},L={class:"mb-4"},M={class:"mb-4"},B={key:0,class:"mt-2"},j=["src"],S={key:0,class:"mb-4"},$={__name:"Edit",props:{user:Object},setup(p){const a=p,d=a.user.profile||{first_name:"",last_name:"",middle_name:"",introduction:"",profile_image:""},r=v({name:a.user.name,email:a.user.email,password:"",password_confirmation:"",role:a.user.Roles,profile:{first_name:d.FirstName,last_name:d.LastName,middle_name:d.MiddleName,introduction:d.Introduction,profile_image:d.ProfileImage?route("storage",d.ProfileImage):null},chef:{income:a.user.chef?a.user.chef.Income:null}}),c=n=>{const e=n.target.files[0];if(e){const t=new FileReader;t.onload=()=>{r.profile.profile_image=t.result},t.readAsDataURL(e)}},g=async()=>{const n=new FormData;n.append("name",r.name),n.append("email",r.email),n.append("password",r.password),n.append("password_confirmation",r.password_confirmation),n.append("role",r.role),n.append("profile[first_name]",r.profile.first_name),n.append("profile[last_name]",r.profile.last_name),n.append("profile[middle_name]",r.profile.middle_name||""),n.append("profile[introduction]",r.profile.introduction||""),r.profile.profile_image instanceof File&&n.append("profile[profile_image]",r.profile.profile_image),r.role==="chef"&&r.chef.income&&n.append("chef[income]",r.chef.income);try{await r.put(route("users.update",a.user.id),{onSuccess:()=>alert("User updated successfully!"),onError:()=>alert("Error updating user.")})}catch(e){console.error("Error submitting form:",e)}};return b(()=>r.role,(n,e)=>{e==="chef"&&(n==="admin"||n==="user")&&(confirm(`Changing the role from Chef to ${n} will delete all chef-related data for this user. Do you want to proceed?`)||(r.role=e))}),(n,e)=>(m(),y(k,null,{default:x(()=>[o("div",U,[e[23]||(e[23]=o("h1",{class:"text-3xl font-semibold text-center mb-6"},"Edit User",-1)),o("form",{onSubmit:w(g,["prevent"]),enctype:"multipart/form-data"},[o("div",V,[o("div",I,[e[10]||(e[10]=o("label",{for:"name",class:"block text-sm font-medium text-gray-700"},"Name",-1)),i(o("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>s(r).name=t),id:"name",type:"text",class:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:outline-none",required:""},null,512),[[l,s(r).name]])]),o("div",N,[e[11]||(e[11]=o("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),i(o("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>s(r).email=t),id:"email",type:"email",class:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:outline-none",required:""},null,512),[[l,s(r).email]])]),o("div",C,[e[12]||(e[12]=o("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"Password",-1)),i(o("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>s(r).password=t),id:"password",type:"password",class:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:outline-none"},null,512),[[l,s(r).password]])]),o("div",E,[e[13]||(e[13]=o("label",{for:"password_confirmation",class:"block text-sm font-medium text-gray-700"},"Confirm Password",-1)),i(o("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>s(r).password_confirmation=t),id:"password_confirmation",type:"password",class:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:outline-none"},null,512),[[l,s(r).password_confirmation]])]),o("div",F,[e[15]||(e[15]=o("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Role",-1)),i(o("select",{"onUpdate:modelValue":e[4]||(e[4]=t=>s(r).role=t),id:"role",class:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:outline-none",required:""},e[14]||(e[14]=[o("option",{value:"admin"},"Admin",-1),o("option",{value:"chef"},"Chef",-1),o("option",{value:"user"},"User",-1)]),512),[[_,s(r).role]])]),o("div",q,[e[16]||(e[16]=o("label",{for:"first_name",class:"block text-sm font-medium text-gray-700"},"First Name",-1)),i(o("input",{"onUpdate:modelValue":e[5]||(e[5]=t=>s(r).profile.first_name=t),id:"first_name",type:"text",class:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:outline-none",required:""},null,512),[[l,s(r).profile.first_name]])]),o("div",D,[e[17]||(e[17]=o("label",{for:"last_name",class:"block text-sm font-medium text-gray-700"},"Last Name",-1)),i(o("input",{"onUpdate:modelValue":e[6]||(e[6]=t=>s(r).profile.last_name=t),id:"last_name",type:"text",class:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:outline-none",required:""},null,512),[[l,s(r).profile.last_name]])]),o("div",P,[e[18]||(e[18]=o("label",{for:"middle_name",class:"block text-sm font-medium text-gray-700"},"Middle Name",-1)),i(o("input",{"onUpdate:modelValue":e[7]||(e[7]=t=>s(r).profile.middle_name=t),id:"middle_name",type:"text",class:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:outline-none"},null,512),[[l,s(r).profile.middle_name]])]),o("div",L,[e[19]||(e[19]=o("label",{for:"introduction",class:"block text-sm font-medium text-gray-700"},"Introduction",-1)),i(o("textarea",{"onUpdate:modelValue":e[8]||(e[8]=t=>s(r).profile.introduction=t),id:"introduction",class:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:outline-none"},null,512),[[l,s(r).profile.introduction]])]),o("div",M,[e[20]||(e[20]=o("label",{for:"profile_image",class:"block text-sm font-medium text-gray-700"},"Profile Image",-1)),o("input",{ref:"profile_image",onChange:c,id:"profile_image",type:"file",class:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:outline-none"},null,544),s(r).profile.profile_image?(m(),u("div",B,[o("img",{src:s(r).profile.profile_image,alt:"Profile Image",class:"w-20 h-20 rounded-full object-cover"},null,8,j)])):f("",!0)]),s(r).role==="chef"?(m(),u("div",S,[e[21]||(e[21]=o("label",{for:"income",class:"block text-sm font-medium text-gray-700"},"Income",-1)),i(o("input",{"onUpdate:modelValue":e[9]||(e[9]=t=>s(r).chef.income=t),id:"income",type:"number",class:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:outline-none"},null,512),[[l,s(r).chef.income]])])):f("",!0),e[22]||(e[22]=o("div",{class:"col-span-2 flex justify-center space-x-6 mt-6"},[o("button",{type:"submit",class:"px-6 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 focus:ring-2 focus:ring-orange-500"},"Update User")],-1))])],32)])]),_:1}))}};export{$ as default};
